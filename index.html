<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Document</title>
</head>

<body>

    <div class="container">

        <!--VARIABLES-->
        <div class="stack-variable-container variable green-border">
            <h2 class="variableTitle">DEĞİŞKENLER</h2>
            <div class="stack-variable varDivs">
                <div class="var-item-1">
                    <p>
                        <span class="varType">int</span>
                        <span class="varName">sayi1</span>
                        <span class="equalsOP"> = </span>
                        <span class="varValue">10</span>
                    </p>
                </div>
                <div class="var-item-2">
                    <p>
                        <span class="varType">int</span>
                        <span class="varName">sayi2</span>
                        <span class="equalsOP"> = </span>
                        <span class="varValue">20</span>
                    </p>
                </div>
                <div class="var-item-3">
                    <p>
                        <span class="varName">sayi1</span>
                        <span class="equalsOP"> = </span>
                        <span class="varValue">sayi2</span>
                    </p>
                </div>
                <div class="var-item-4">
                    <p>
                        <span class="varName">sayi2</span>
                        <span class="equalsOP"> = </span>
                        <span class="varValue">100</span>
                    </p>
                </div>
                <div class="var-item-5">
                    <p>
                        <span class="varType">int[ ]</span>
                        <span class="varName">sayilar1</span>
                        <span class="equalsOP"> = </span>
                        <span class="varValue">[1, 3, 5, 7, 9]</span>
                    </p>
                </div>
                <div class="var-item-6">
                    <p>
                        <span class="varType">int[ ]</span>
                        <span class="varName">sayilar2</span>
                        <span class="equalsOP"> = </span>
                        <span class="varValue">[10, 30, 50, 70, 90]</span>
                    </p>
                </div>
                <div class="var-item-7">
                    <p>
                        <span class="varName">sayilar1</span>
                        <span class="equalsOP"> = </span>
                        <span class="varValue">sayilar2</span>
                    </p>
                </div>
                <div class="var-item-8">
                    <p>
                        <span class="varName">sayilar2[0]</span>
                        <span class="equalsOP"> = </span>
                        <span class="varValue">1000</span>
                    </p>
                </div>
            </div>
        </div>

        <!--STACK-->
        <div class="stack-variable-container stack">
            <h2 class="stackTitle">STACK</h2>
            <div class="stack-variable stackDivs">
                <div class="stack-item-1">
                    <p>102</p>
                </div>
                <div class="stack-item-2">
                    <p>101</p>
                </div>
                <div class="stack-item-3">
                    <p>20</p>
                </div>
                <div class="stack-item-4">
                    <p>10</p>
                </div>
            </div>
        </div>

        <!--HEAP-->
        <div class="heapContainer">
            <h2 class="heapTitle">HEAP</h2>
            <div class="heap">
                <h3 class="gc"></h3>
                <div class="heap-item-1">
                    <div>
                        <h1>[Adress: 101]</h1>
                    </div>
                    <div>
                        <p>
                            [1, 3, 5, 7, 9]
                        </p>
                    </div>
                </div>
                <div class="heap-item-2">
                    <div>
                        <h1>[Adress: 102]</h1>
                    </div>
                    <div>
                        <p>
                            [10, 30, 50, 70, 90]
                        </p>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="controls">
        <div class="prev btn">
            <span>
                &lt;
            </span>
            Önceki Adım
        </div>
        <div class="github">
            <h2>EmirS <a href="https://github.com/EmirS4h"><i class="fa fa-github ico" style="font-size:48px"></i></a>
            </h2>
        </div>
        <div class="next btn">
            Sonraki Adım
            <span>&gt;</span>
        </div>
    </div>

    <script src="anime.min.js"></script>
    <script>
        const gitLogo = document.querySelector(".ico");
        const sayi1 = document.querySelector(".stack-item-4");
        let sayi1Changed = false;
        const sayi2 = document.querySelector(".stack-item-3");
        let sayi2Changed = false;
        const nextBtn = document.querySelector(".next");
        const prevBtn = document.querySelector(".prev");

        let varDivsCounter = 0;
        let stackDivsCounter = 0;
        let heapDivsCounter = 0;

        const varDivs = document.querySelectorAll(".varDivs div");
        const stackDivs = document.querySelectorAll(".stackDivs div");
        const heapItemOne = document.querySelector(".heap-item-1");
        const heapItemTwo = document.querySelector(".heap-item-2");
        const heapItemTwoP = document.querySelector(".heap-item-2 p");
        const stackItemOne = document.querySelector(".stack-item-1");
        const stackItemTwo = document.querySelector(".stack-item-2");
        const gc = document.querySelector(".gc");
        let heapItemOneUpdated = false;
        let heapItemTwoUpdated = false;

        stackDivsCounter = stackDivs.length - 1;

        nextBtn.addEventListener("click", () => {

            animateVarsUp();
            if (varDivsCounter === 2 || varDivsCounter === 3 || varDivsCounter === 6 || varDivsCounter === 7) {
                if (varDivsCounter === 2) {
                    changeSayi1();
                } else if (varDivsCounter === 3) {
                    changeSayi2();
                }
            } else {
                animateStackUp();
                checkStackDivsCounterBoundries();
                stackDivsCounter--;
            }
            if (varDivsCounter === 4) {
                showHeapItem1();
            }
            if (varDivsCounter === 5) {
                showHeapItem2();
            }
            if (varDivsCounter === 6) {
                updateHeapItemOne();
            }
            if (varDivsCounter === 7) {
                updateHeapItemTwo();
            }
            checkVarDivsCounterBoundries();
            varDivsCounter++;
        })

        prevBtn.addEventListener("click", () => {
            varDivsCounter--;

            animateVarsDown();

            if (varDivsCounter === 2 || varDivsCounter === 3 || varDivsCounter === 6 || varDivsCounter === 7) {
                if (varDivsCounter === 2) {
                    changeSayi1();
                } else if (varDivsCounter === 3) {
                    changeSayi2();
                }
            } else {
                stackDivsCounter++;
                animateStackDown();
                checkStackDivsCounterBoundries();
            }
            if (varDivsCounter === 5) {
                hideHeapItem2();
            }
            if (varDivsCounter === 4) {
                hideHeapItem1();
            }
            if (varDivsCounter === 6) {
                updateHeapItemOne();
            }
            if (varDivsCounter === 7) {
                updateHeapItemTwo();
            }
            checkVarDivsCounterBoundries();
        })

        function checkVarDivsCounterBoundries() {
            if (varDivsCounter >= varDivs.length) {
                varDivsCounter = varDivs.length - 1;
            } else if (varDivsCounter <= 0) {
                varDivsCounter = 0;
            }
        }
        function checkStackDivsCounterBoundries() {
            if (stackDivsCounter >= stackDivs.length) {
                stackDivsCounter = stackDivs.length - 1;
            } else if (stackDivsCounter <= 0) {
                stackDivsCounter = 0;
            }
        }

        function animateVarsUp() {
            anime({
                targets: varDivs[varDivsCounter],
                opacity: ["0%", "100%"],
                duration: "1000",
            });
        }
        function animateVarsDown() {
            anime({
                targets: varDivs[varDivsCounter],
                opacity: ["100%", "0%"],
                duration: "1000",
            });
        }

        function animateStackUp() {
            anime({
                targets: stackDivs[stackDivsCounter],
                opacity: ["0%", "100%"],
                duration: "1000",
            })
        }

        function animateStackDown() {
            anime({
                targets: stackDivs[stackDivsCounter],
                opacity: ["100%", "0%"],
                duration: "1000",
            })
        }

        function changeSayi1() {
            if (!sayi1Changed) {
                sayi1.textContent = "20";
                anime({
                    targets: stackDivs[3],
                    scale: ["70%", "100%"],
                    duration: "500",
                })
                sayi1Changed = true;
            } else {
                sayi1.textContent = "10";

                anime({
                    targets: stackDivs[3],
                    scale: ["70%", "100%"],
                    duration: "500",
                })
                sayi1Changed = false;
            }
        }
        function changeSayi2() {
            if (!sayi2Changed) {
                sayi2.textContent = "100";
                anime({
                    targets: stackDivs[2],
                    scale: ["70%", "100%"],
                    duration: "500",
                })
                sayi2Changed = true;
            } else {
                sayi2.textContent = "20";
                anime({
                    targets: stackDivs[2],
                    scale: ["70%", "100%"],
                    duration: "500",
                })
                sayi2Changed = false;
            }
        }
        function showHeapItem1() {
            anime({
                targets: heapItemOne,
                opacity: ["0%", "100%"],
                duration: "1000",
            });
        }
        function hideHeapItem1() {
            anime({
                targets: heapItemOne,
                opacity: ["100%", "0%"],
                duration: "1000",
            })
        }

        function showHeapItem2() {
            anime({
                targets: heapItemTwo,
                opacity: ["0%", "100%"],
                duration: "1000",
            });
        }
        function hideHeapItem2() {
            anime({
                targets: heapItemTwo,
                opacity: ["100%", "0%"],
                duration: "1000",
            });
        }
        function updateHeapItemOne() {
            if (!heapItemOneUpdated) {
                anime({
                    targets: heapItemOne,
                    scale: ["50%", "100%"],
                    opacity: ["100%", "10%"],
                    duration: "500",
                });
                anime({
                    targets: stackItemTwo,
                    scale: ["70%", "100%"],
                    duration: "500",
                })
                gc.textContent = "Java Garbage Collecter tarafından temizlendi";
                stackItemTwo.textContent = "102";
                heapItemOneUpdated = true;
            } else {
                anime({
                    targets: heapItemOne,
                    scale: ["50%", "100%"],
                    opacity: ["10%", "100%"],
                    duration: "500",
                });
                anime({
                    targets: stackItemTwo,
                    scale: ["70%", "100%"],
                    duration: "500",
                })
                gc.textContent = "";
                stackItemTwo.textContent = "101";
                heapItemOneUpdated = false;
            }
        }

        function updateHeapItemTwo() {
            if (!heapItemTwoUpdated) {
                heapItemTwoP.textContent = "[1000, 30, 50, 70, 90]";
                anime({
                    targets: heapItemTwo,
                    scale: ["50%", "100%"],
                    duration: "500",
                });
                heapItemTwoUpdated = true;
            } else {
                heapItemTwoP.textContent = "[10, 30, 50, 70, 90]";
                anime({
                    targets: heapItemTwo,
                    scale: ["50%", "100%"],
                    duration: "500",
                });
                heapItemTwoUpdated = false;
            }
        }

        const logoAnim = anime({
            targets: gitLogo,
            rotate: "360",
            scale: ["50%", "100%"],
            duration: "1000",
        });
        gitLogo.addEventListener("mouseover", () => {
            logoAnim.play();
        })
    </script>
</body>

</html>